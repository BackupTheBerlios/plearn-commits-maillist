<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plearn-commits] r8905 - in	trunk/plearn_learners/generic/test/NNet: . .pytest	.pytest/PL_NNet_1_hidden_bug	.pytest/PL_NNet_1_hidden_bug/expected_results	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plearn-commits/2008-April/index.html" >
   <LINK REL="made" HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r8905%20-%20in%0A%09trunk/plearn_learners/generic/test/NNet%3A%20.%20.pytest%0A%09.pytest/PL_NNet_1_hidden_bug%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata&In-Reply-To=%3C200804281347.m3SDlCKs017164%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002352.html">
   <LINK REL="Next"  HREF="002354.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plearn-commits] r8905 - in	trunk/plearn_learners/generic/test/NNet: . .pytest	.pytest/PL_NNet_1_hidden_bug	.pytest/PL_NNet_1_hidden_bug/expected_results	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata</H1>
    <B>tihocan at BerliOS</B> 
    <A HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r8905%20-%20in%0A%09trunk/plearn_learners/generic/test/NNet%3A%20.%20.pytest%0A%09.pytest/PL_NNet_1_hidden_bug%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata%0A%09.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata&In-Reply-To=%3C200804281347.m3SDlCKs017164%40sheep.berlios.de%3E"
       TITLE="[Plearn-commits] r8905 - in	trunk/plearn_learners/generic/test/NNet: . .pytest	.pytest/PL_NNet_1_hidden_bug	.pytest/PL_NNet_1_hidden_bug/expected_results	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata	.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata">tihocan at mail.berlios.de
       </A><BR>
    <I>Mon Apr 28 15:47:12 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002352.html">[Plearn-commits] r8904 - trunk/plearn_learners_experimental
</A></li>
        <LI>Next message: <A HREF="002354.html">[Plearn-commits] r8906 - in	trunk/plearn_learners/regressors/test/RegressionTree: .	.pytest/PL_RegressionTree/expected_results/expdir	.pytest/PL_RegressionTree_MultiClass/expected_results/expdir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2353">[ date ]</a>
              <a href="thread.html#2353">[ thread ]</a>
              <a href="subject.html#2353">[ subject ]</a>
              <a href="author.html#2353">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tihocan
Date: 2008-04-28 15:47:12 +0200 (Mon, 28 Apr 2008)
New Revision: 8905

Added:
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/RUN.log
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0/final_learner.psave
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes
   trunk/plearn_learners/generic/test/NNet/nnet_regression.pyplearn
Modified:
   trunk/plearn_learners/generic/test/NNet/pytest.config
Log:
Added test PL_NNet_1_hidden_bug to test for both a NNet on regression, and to make sure an old bug does not come back


Property changes on: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug
___________________________________________________________________
Name: svn:ignore
   + .plearn
run_results
PSAVEDIFF


Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/RUN.log
===================================================================

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0/final_learner.psave
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0/final_learner.psave	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/Split0/final_learner.psave	2008-04-28 13:47:12 UTC (rev 8905)
@@ -0,0 +1,64 @@
+*1 -&gt;NNet(
+nhidden = 1 ;
+nhidden2 = 0 ;
+noutputs = 2 ;
+weight_decay = 0 ;
+bias_decay = 0 ;
+layer1_weight_decay = 0 ;
+layer1_bias_decay = 0 ;
+layer2_weight_decay = 0 ;
+layer2_bias_decay = 0 ;
+output_layer_weight_decay = 0 ;
+output_layer_bias_decay = 0 ;
+direct_in_to_out_weight_decay = 0 ;
+penalty_type = &quot;L2_square&quot; ;
+L1_penalty = 0 ;
+fixed_output_weights = 0 ;
+input_reconstruction_penalty = 0 ;
+direct_in_to_out = 0 ;
+rbf_layer_size = 0 ;
+first_class_is_junk = 1 ;
+output_transfer_func = &quot;&quot; ;
+hidden_transfer_func = &quot;tanh&quot; ;
+cost_funcs = 1 [ &quot;mse&quot; ] ;
+classification_regularizer = 0 ;
+first_hidden_layer = *0 ;
+first_hidden_layer_is_output = 0 ;
+n_non_params_in_first_hidden_layer = 0 ;
+transpose_first_hidden_layer = 0 ;
+margin = 1 ;
+do_not_change_params = 0 ;
+optimizer = *2 -&gt;GradientOptimizer(
+start_learning_rate = 0.0100000000000000002 ;
+learning_rate = 0.0040016006402561026 ;
+decrease_constant = 0.00100000000000000002 ;
+lr_schedule = 0  0  [ 
+]
+;
+use_stochastic_hack = 0 ;
+verbosity = 0 ;
+nstages = 15  )
+;
+batch_size = 10 ;
+initialization_method = &quot;uniform_linear&quot; ;
+operate_on_bags = 0 ;
+max_bag_size = 20 ;
+paramsvalues = 9 [ -13.1263168777845713 19.5941887064242941 -12.3293937074457105 -28.661808141978188 26.1194879580729342 2.86359530614624225 10.1351639859538007 -75.9476149878473024 -43.2771486529794842 ] ;
+random_gen = *3 -&gt;PRandom(
+seed = 1827 ;
+fixed_seed = 0  )
+;
+seed = 1827 ;
+stage = 100 ;
+n_examples = 150 ;
+inputsize = 4 ;
+targetsize = 2 ;
+weightsize = 0 ;
+forget_when_training_set_changes = 0 ;
+nstages = 100 ;
+report_progress = 1 ;
+verbosity = 1 ;
+nservers = 0 ;
+save_trainingset_prefix = &quot;&quot; ;
+test_minibatch_size = 1 ;
+use_a_separate_random_generator_for_testing = 1827  )

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat
===================================================================
(Binary files differ)


Property changes on: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames	2008-04-28 13:47:12 UTC (rev 8905)
@@ -0,0 +1 @@
+E[test1.E[mse]]	0

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes	2008-04-28 13:47:12 UTC (rev 8905)
@@ -0,0 +1 @@
+-1 -1 -1 0 

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat
===================================================================
(Binary files differ)


Property changes on: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames	2008-04-28 13:47:12 UTC (rev 8905)
@@ -0,0 +1,2 @@
+splitnum	0
+test1.E[mse]	0

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_1_hidden_bug/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes	2008-04-28 13:47:12 UTC (rev 8905)
@@ -0,0 +1 @@
+-1 -1 -1 0 

Added: trunk/plearn_learners/generic/test/NNet/nnet_regression.pyplearn
===================================================================
--- trunk/plearn_learners/generic/test/NNet/nnet_regression.pyplearn	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/nnet_regression.pyplearn	2008-04-28 13:47:12 UTC (rev 8905)
@@ -0,0 +1,38 @@
+# Simple basic NNet experiment for a multivariate regression task.
+# It has only one hidden neuron so as to serve as a test for a bug
+# that appeared with 1-hidden-neuron networks.
+
+from plearn.pyplearn import pl
+
+nnet = pl.NNet(
+        cost_funcs = [ 'mse' ],
+        direct_in_to_out = False,
+        nhidden = 1,
+        noutputs = 2,
+        nstages = 100,
+        optimizer = pl.GradientOptimizer(
+            start_learning_rate = 1e-2,
+            decrease_constant = 1e-3,
+            ),
+        output_transfer_func = '',
+        weight_decay = 0,
+        batch_size = 10,
+        )
+
+tester = pl.PTester(
+        expdir = 'expdir-nnet',
+        learner = nnet,
+        dataset = pl.MemoryVMatrix(
+            source = pl.AutoVMatrix( filename = &quot;PLEARNDIR:examples/data/test_suite/linear_4x_2y.pmat&quot; )),
+        statnames = [ 'E[test1.E[mse]]' ],
+        splitter = pl.FractionSplitter(
+            splits = TMat(1, 2, [ (0, 0.75), (0.75, 1) ]),
+            ),
+        save_initial_tester = False,
+        save_stat_collectors = False,
+        save_test_names = False,
+        )
+
+def main():
+    return tester
+

Modified: trunk/plearn_learners/generic/test/NNet/pytest.config
===================================================================
--- trunk/plearn_learners/generic/test/NNet/pytest.config	2008-04-26 20:37:58 UTC (rev 8904)
+++ trunk/plearn_learners/generic/test/NNet/pytest.config	2008-04-28 13:47:12 UTC (rev 8905)
@@ -5,39 +5,31 @@
     For each Test instance you declare in a config file, a test will be ran
     by PyTest.
     
-      @ivar(name):
-    The name of the Test must uniquely determine the
+    @ivar name: The name of the Test must uniquely determine the
     test. Among others, it will be used to identify the test's results
-    (.PyTest/name/*_results/) and to report test informations.
-      @type(name):
-    String
+    (.PyTest/I{name}/*_results/) and to report test informations.
+    @type name: String
     
-      @ivar(description):
-    The description must provide other users an
+    @ivar description: The description must provide other users an
     insight of what exactly is the Test testing. You are encouraged
     to used triple quoted strings for indented multi-lines
     descriptions.
-      @type(description):
-    String
+    @type description: String
     
-      @ivar(category):
-    The category to which this test belongs. By default, a
+    @ivar category: The category to which this test belongs. By default, a
     test is considered a 'General' test.
     
     It is not desirable to let an extensive and lengthy test as 'General',
     while one shall refrain abusive use of categories since it is likely
     that only 'General' tests will be ran before most commits...
     
-      @type(category):
-    string
+    @type category: string
     
-      @ivar(program):
-    The program to be run by the Test. The program's name
-    PRGNAME is used to lookup for the program in the following manner:
+    @ivar program: The program to be run by the Test. The program's name
+    PRGNAME is used to lookup for the program in the following manner::
     
     1) Look for a local program named PRGNAME
-    2) Look for a plearn-like command (plearn, plearn_tests, ...) named 
-PRGNAME
+    2) Look for a plearn-like command (plearn, plearn_tests, ...) named PRGNAME
     3) Call 'which PRGNAME'
     4) Fail
     
@@ -46,50 +38,39 @@
     &quot;compiler = 'pymake'&quot;). If no compiler is provided while the program is
     believed to be compilable, 'pymake' will be assigned by
     default. Arguments to be forwarded to the compiler can be provided as a
-    string through the 'compile_options' keyword argument. @type program:
-    Program
+    string through the 'compile_options' keyword argument.  @type program:
+    L{Program}
     
-      @ivar(arguments):
-    The command line arguments to be passed to the program
+    @ivar arguments: The command line arguments to be passed to the program
     for the test to proceed.
-      @type(arguments):
-    String
+    @type arguments: String
     
-      @ivar(resources):
-    A list of resources that are used by your program
+    @ivar resources: A list of resources that are used by your program
     either in the command line or directly in the code (plearn or pyplearn
-    files, databases, ...). The elements of the list must be string
+    files, databases, ...).  The elements of the list must be string
     representations of the path, absolute or relative, to the resource.
-      @type(resources):
-    List of Strings
+    @type resources: List of Strings
     
-      @ivar(precision):
-    The precision (absolute and relative) used when comparing
+    @ivar precision: The precision (absolute and relative) used when comparing
     floating numbers in the test output (default = 1e-6)
-      @type(precision):
-    float
+    @type precision: float
     
-      @ivar(pfileprg):
-    The program to be used for comparing files of psave &amp;
-    vmat formats. It can be either:
-      - &quot;__program__&quot;: maps to this test's program if its compilable;
+    @ivar pfileprg: The program to be used for comparing files of psave &amp;
+    vmat formats. It can be either::
+    - &quot;__program__&quot;: maps to this test's program if its compilable;
     maps to 'plearn_tests' otherwise (default);
-      - &quot;__plearn__&quot;: always maps to 'plearn_tests' (for when the program
+    - &quot;__plearn__&quot;: always maps to 'plearn_tests' (for when the program
     under test is not a version of PLearn);
-      - A Program (see 'program' option) instance
-      - None: if you are sure no files are to be compared.
+    - A Program (see 'program' option) instance
+    - None: if you are sure no files are to be compared.
     
-      @ivar(ignored_files_re):
-    Default behaviour of a test is to compare all
+    @ivar ignored_files_re: Default behaviour of a test is to compare all
     files created by running the test. In some case, one may prefer some of
     these files to be ignored.
-      @type(ignored_files_re):
-    list of regular expressions
+    @type ignored_files_re: list of regular expressions
     
-      @ivar(disabled):
-    If true, the test will not be ran.
-      @type(disabled):
-    bool
+    @ivar disabled: If true, the test will not be ran.
+    @type disabled: bool
     
 &quot;&quot;&quot;
 Test(
@@ -126,3 +107,21 @@
     difftime = None
     )
 
+Test(
+    name = &quot;PL_NNet_1_hidden_bug&quot;,
+    description = &quot;Regression test for bug with a single hidden unit&quot;,
+    category = &quot;General&quot;,
+    program = Program(
+        name = &quot;plearn_tests&quot;,
+        compiler = &quot;pymake&quot;
+        ),
+    arguments = &quot;nnet_regression.pyplearn&quot;,
+    resources = [ &quot;nnet_regression.pyplearn&quot; ],
+    precision = 1e-06,
+    pfileprg = &quot;__program__&quot;,
+    disabled = False,
+    runtime = None,
+    difftime = None
+    )
+
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002352.html">[Plearn-commits] r8904 - trunk/plearn_learners_experimental
</A></li>
	<LI>Next message: <A HREF="002354.html">[Plearn-commits] r8906 - in	trunk/plearn_learners/regressors/test/RegressionTree: .	.pytest/PL_RegressionTree/expected_results/expdir	.pytest/PL_RegressionTree_MultiClass/expected_results/expdir
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2353">[ date ]</a>
              <a href="thread.html#2353">[ thread ]</a>
              <a href="subject.html#2353">[ subject ]</a>
              <a href="author.html#2353">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plearn-commits">More information about the Plearn-commits
mailing list</a><br>
</body></html>
