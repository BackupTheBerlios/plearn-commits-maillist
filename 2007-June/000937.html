<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plearn-commits] r7488 - in	trunk/plearn_learners/online/test/ModuleTester: . .pytest	.pytest/PL_ModuleTester_RBM	.pytest/PL_ModuleTester_RBM/expected_results
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plearn-commits/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r7488%20-%20in%0A%09trunk/plearn_learners/online/test/ModuleTester%3A%20.%20.pytest%0A%09.pytest/PL_ModuleTester_RBM%0A%09.pytest/PL_ModuleTester_RBM/expected_results&In-Reply-To=%3C200706011501.l51F1sDt002303%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000936.html">
   <LINK REL="Next"  HREF="000938.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plearn-commits] r7488 - in	trunk/plearn_learners/online/test/ModuleTester: . .pytest	.pytest/PL_ModuleTester_RBM	.pytest/PL_ModuleTester_RBM/expected_results</H1>
    <B>tihocan at BerliOS</B> 
    <A HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r7488%20-%20in%0A%09trunk/plearn_learners/online/test/ModuleTester%3A%20.%20.pytest%0A%09.pytest/PL_ModuleTester_RBM%0A%09.pytest/PL_ModuleTester_RBM/expected_results&In-Reply-To=%3C200706011501.l51F1sDt002303%40sheep.berlios.de%3E"
       TITLE="[Plearn-commits] r7488 - in	trunk/plearn_learners/online/test/ModuleTester: . .pytest	.pytest/PL_ModuleTester_RBM	.pytest/PL_ModuleTester_RBM/expected_results">tihocan at mail.berlios.de
       </A><BR>
    <I>Fri Jun  1 17:01:54 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000936.html">[Plearn-commits] r7487 - in trunk/python_modules/plearn: . plotting
</A></li>
        <LI>Next message: <A HREF="000938.html">[Plearn-commits] r7489 - trunk/python_modules/plearn/learners/autolr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#937">[ date ]</a>
              <a href="thread.html#937">[ thread ]</a>
              <a href="subject.html#937">[ subject ]</a>
              <a href="author.html#937">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tihocan
Date: 2007-06-01 17:01:54 +0200 (Fri, 01 Jun 2007)
New Revision: 7488

Added:
   trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM/
   trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM/expected_results/
   trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM/expected_results/RUN.log
   trunk/plearn_learners/online/test/ModuleTester/PL_ModuleTester_RBM.pyplearn
Modified:
   trunk/plearn_learners/online/test/ModuleTester/pytest.config
Log:
Added test 'PL_ModuleTester_RBM'


Property changes on: trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM
___________________________________________________________________
Name: svn:ignore
   + .plearn
run_results


Added: trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM/expected_results/RUN.log
===================================================================
--- trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM/expected_results/RUN.log	2007-06-01 14:52:47 UTC (rev 7487)
+++ trunk/plearn_learners/online/test/ModuleTester/.pytest/PL_ModuleTester_RBM/expected_results/RUN.log	2007-06-01 15:01:54 UTC (rev 7488)
@@ -0,0 +1,14 @@
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule
+ WARNING: RBMMatrixConnection: cannot forget() without random_gen
+All tests passed successfully on module RBMModule

Added: trunk/plearn_learners/online/test/ModuleTester/PL_ModuleTester_RBM.pyplearn
===================================================================
--- trunk/plearn_learners/online/test/ModuleTester/PL_ModuleTester_RBM.pyplearn	2007-06-01 14:52:47 UTC (rev 7487)
+++ trunk/plearn_learners/online/test/ModuleTester/PL_ModuleTester_RBM.pyplearn	2007-06-01 15:01:54 UTC (rev 7488)
@@ -0,0 +1,94 @@
+# Run safety checks on RBMModule.
+
+from plearn.pyplearn import pl
+
+def rbm(cd_learning_rate, grad_learning_rate, visible_size, hidden_size, name,
+        compute_cd = False):
+    # Return a standard binomial RBM.
+    return pl.RBMModule(
+            name = name,
+            compute_contrastive_divergence = compute_cd,
+            cd_learning_rate = cd_learning_rate,
+            grad_learning_rate = grad_learning_rate,
+            visible_layer = pl.RBMBinomialLayer(size = visible_size),
+            hidden_layer = pl.RBMBinomialLayer(size = hidden_size),
+            connection = pl.RBMMatrixConnection(
+                down_size = visible_size,
+                up_size = hidden_size))
+
+
+# All port configurations used in tests.
+conf_basic = \
+        {&quot;in_grad&quot;:[ &quot;visible&quot; ],
+         &quot;out_grad&quot;:[ &quot;hidden.state&quot; ],
+         &quot;out_nograd&quot;:[ &quot;hidden_activations.state&quot; ]}
+
+conf_bias_cd = \
+        {&quot;in_grad&quot;:[ &quot;hidden_bias&quot; ],
+         &quot;in_nograd&quot;:[ &quot;visible&quot; ],
+         &quot;out_grad&quot;:[ &quot;contrastive_divergence&quot; ],
+         &quot;out_nograd&quot;:[ &quot;hidden.state&quot;, &quot;hidden_activations.state&quot;, &quot;negative_phase_visible_samples.state&quot;,
+                        &quot;negative_phase_hidden_expectations.state&quot;, &quot;negative_phase_hidden_activations.state&quot; ]}
+
+conf_bias_grad = \
+        {&quot;in_grad&quot;:[ &quot;hidden_bias&quot; ],
+         &quot;in_nograd&quot;:[ &quot;visible&quot; ],
+         &quot;out_grad&quot;:[ &quot;hidden.state&quot; ],
+         &quot;out_nograd&quot;:[ &quot;hidden_activations.state&quot; ]}
+
+conf_bias_both = \
+        {&quot;in_grad&quot;:[ &quot;hidden_bias&quot; ],
+         &quot;in_nograd&quot;:[ &quot;visible&quot; ],
+         &quot;out_grad&quot;:[ &quot;hidden.state&quot;, &quot;contrastive_divergence&quot; ],
+         &quot;out_nograd&quot;:[ &quot;hidden_activations.state&quot;, &quot;negative_phase_visible_samples.state&quot;,
+                        &quot;negative_phase_hidden_expectations.state&quot;, &quot;negative_phase_hidden_activations.state&quot; ]}
+
+
+testers = [
+
+    # Test a simple RBM that does not update itself (learning rates are set
+    # to 0).
+    pl.ModuleTester(
+            module = rbm(0, 0, 10, 20, 'rbm'),
+            configurations = [ conf_basic ]),
+
+    # Test with a positive gradient learning rate.
+    pl.ModuleTester(
+            module = rbm(0, 1e-3, 10, 20, 'rbm'),
+            configurations = [ conf_basic ]),
+
+    # Test with a positive contrastive divergence learning rate.
+    pl.ModuleTester(
+            module = rbm(1e-3, 0, 10, 20, 'rbm'),
+            configurations = [ conf_basic ]),
+
+    # Test with both contrastive divergence and gradient learning rate.
+    pl.ModuleTester(
+            module = rbm(1e-3, 1e-2, 10, 20, 'rbm'),
+            configurations = [ conf_basic ]),
+
+    # Test of gradient of contrastive divergence w.r.t. bias.
+    pl.ModuleTester(
+            module = rbm(1e-3, 0, 10, 20, 'rbm', True),
+            configurations = [ conf_bias_cd ],
+            min_out_grad = 1,
+            max_out_grad = 1),
+
+    # Test of backpropagation gradient w.r.t. bias.
+    pl.ModuleTester(
+            module = rbm(0, 1e-3, 10, 20, 'rbm'),
+            configurations = [ conf_bias_grad ]),
+
+    # Test of both backpropagation and contrastive divergence gradients w.r.t. bias.
+    pl.ModuleTester(
+            module = rbm(1e-2, 1e-3, 10, 20, 'rbm', True),
+            configurations = [ conf_bias_both ],
+            min_out_grad = 1,
+            max_out_grad = 1)
+
+    ]
+
+def main():
+    return pl.RunObject( objects = testers )
+
+

Modified: trunk/plearn_learners/online/test/ModuleTester/pytest.config
===================================================================
--- trunk/plearn_learners/online/test/ModuleTester/pytest.config	2007-06-01 14:52:47 UTC (rev 7487)
+++ trunk/plearn_learners/online/test/ModuleTester/pytest.config	2007-06-01 15:01:54 UTC (rev 7488)
@@ -137,4 +137,18 @@
     disabled = False
     )
 
+Test(
+    name = &quot;PL_ModuleTester_RBM&quot;,
+    description = &quot;Test RBMModule&quot;,
+    category = &quot;General&quot;,
+    program = Program(
+        name = &quot;plearn_tests&quot;,
+        compiler = &quot;pymake&quot;
+        ),
+    arguments = &quot;PL_ModuleTester_RBM.pyplearn&quot;,
+    resources = [ &quot;PL_ModuleTester_RBM.pyplearn&quot; ],
+    precision = 1e-06,
+    pfileprg = &quot;__program__&quot;,
+    disabled = False
+    )
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000936.html">[Plearn-commits] r7487 - in trunk/python_modules/plearn: . plotting
</A></li>
	<LI>Next message: <A HREF="000938.html">[Plearn-commits] r7489 - trunk/python_modules/plearn/learners/autolr
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#937">[ date ]</a>
              <a href="thread.html#937">[ thread ]</a>
              <a href="subject.html#937">[ subject ]</a>
              <a href="author.html#937">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plearn-commits">More information about the Plearn-commits
mailing list</a><br>
</body></html>
