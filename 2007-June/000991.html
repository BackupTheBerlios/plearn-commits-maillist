<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plearn-commits] r7542 - in trunk: commands/PLearnCommands	plearn/io python_modules/plearn python_modules/plearn/plide	python_modules/plearn/pybridge python_modules/plearn/pyext	python_modules/plearn/pyplearn python_modules/plearn/utilities	python_modules/plearn/utilities/resources scripts
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plearn-commits/2007-June/index.html" >
   <LINK REL="made" HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r7542%20-%20in%20trunk%3A%20commands/PLearnCommands%0A%09plearn/io%20python_modules/plearn%20python_modules/plearn/plide%0A%09python_modules/plearn/pybridge%20python_modules/plearn/pyext%0A%09python_modules/plearn/pyplearn%20python_modules/plearn/utilities%0A%09python_modules/plearn/utilities/resources%20scripts&In-Reply-To=%3C200706052011.l55KB42H025280%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000990.html">
   <LINK REL="Next"  HREF="000992.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plearn-commits] r7542 - in trunk: commands/PLearnCommands	plearn/io python_modules/plearn python_modules/plearn/plide	python_modules/plearn/pybridge python_modules/plearn/pyext	python_modules/plearn/pyplearn python_modules/plearn/utilities	python_modules/plearn/utilities/resources scripts</H1>
    <B>saintmlx at BerliOS</B> 
    <A HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r7542%20-%20in%20trunk%3A%20commands/PLearnCommands%0A%09plearn/io%20python_modules/plearn%20python_modules/plearn/plide%0A%09python_modules/plearn/pybridge%20python_modules/plearn/pyext%0A%09python_modules/plearn/pyplearn%20python_modules/plearn/utilities%0A%09python_modules/plearn/utilities/resources%20scripts&In-Reply-To=%3C200706052011.l55KB42H025280%40sheep.berlios.de%3E"
       TITLE="[Plearn-commits] r7542 - in trunk: commands/PLearnCommands	plearn/io python_modules/plearn python_modules/plearn/plide	python_modules/plearn/pybridge python_modules/plearn/pyext	python_modules/plearn/pyplearn python_modules/plearn/utilities	python_modules/plearn/utilities/resources scripts">saintmlx at mail.berlios.de
       </A><BR>
    <I>Tue Jun  5 22:11:04 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000990.html">[Plearn-commits] r7541 - trunk/python_modules/plearn/learners/autolr
</A></li>
        <LI>Next message: <A HREF="000992.html">[Plearn-commits] r7543 - trunk/python_modules/plearn/utilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#991">[ date ]</a>
              <a href="thread.html#991">[ thread ]</a>
              <a href="subject.html#991">[ subject ]</a>
              <a href="author.html#991">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: saintmlx
Date: 2007-06-05 22:11:02 +0200 (Tue, 05 Jun 2007)
New Revision: 7542

Added:
   trunk/python_modules/plearn/utilities/options_dialog.py
   trunk/python_modules/plearn/utilities/resources/
   trunk/python_modules/plearn/utilities/resources/options_dialog.glade
Modified:
   trunk/commands/PLearnCommands/RunCommand.cc
   trunk/plearn/io/PyPLearnScript.cc
   trunk/plearn/io/PyPLearnScript.h
   trunk/python_modules/plearn/pl_pygtk.py
   trunk/python_modules/plearn/plide/plide_options.py
   trunk/python_modules/plearn/pybridge/test_embedded_code_snippet.py
   trunk/python_modules/plearn/pyext/__init__.py
   trunk/python_modules/plearn/pyplearn/plargs.py
   trunk/scripts/pyplearn_driver.py
Log:
- added '+gui' option to pyplearn and python scripts: graphically show plopts in all plnamespaces



Modified: trunk/commands/PLearnCommands/RunCommand.cc
===================================================================
--- trunk/commands/PLearnCommands/RunCommand.cc	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/commands/PLearnCommands/RunCommand.cc	2007-06-05 20:11:02 UTC (rev 7542)
@@ -104,6 +104,9 @@
         if ( script == &quot;&quot; )
             return;    
 
+        PL_Log::instance().enableNamedLogging(pyplearn_script-&gt;module_names);
+        PL_Log::instance().verbosity(pyplearn_script-&gt;verbosity);
+
         in = openString( script, PStream::plearn_ascii );
     }
     else if(extension==&quot;plearn&quot;)  // perform plearn macro expansion

Modified: trunk/plearn/io/PyPLearnScript.cc
===================================================================
--- trunk/plearn/io/PyPLearnScript.cc	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/plearn/io/PyPLearnScript.cc	2007-06-05 20:11:02 UTC (rev 7542)
@@ -139,6 +139,11 @@
             }
         }
     }
+
+    final_args.push_back(string(&quot;--named-logging=&quot;)
+                         + join(PL_Log::instance().namedLogging(), &quot;,&quot;));
+    final_args.push_back(string(&quot;--verbosity=&quot;)
+                         + tostring(PL_Log::instance().verbosity()))    ;
 #ifdef WIN32
     Popen popen(&quot;python.exe&quot;, final_args);
 #else
@@ -198,7 +203,9 @@
     do_help(false),
     do_dump(false),
     metainfos(&quot;&quot;),
-    expdir(&quot;&quot;)
+    expdir(&quot;&quot;),
+    verbosity(PL_Log::instance().verbosity()),
+    module_names(PL_Log::instance().namedLogging())
 {}
   
 PLEARN_IMPLEMENT_OBJECT( PyPLearnScript,
@@ -211,6 +218,9 @@
 
 void PyPLearnScript::run()
 {
+    PL_Log::instance().enableNamedLogging(module_names);
+    PL_Log::instance().verbosity(verbosity);
+
     PStream in = openString( plearn_script, PStream::plearn_ascii );
 
     while ( in )
@@ -250,6 +260,14 @@
                    OptionBase::buildoption,
                    &quot;The expdir of the experiment described by the script&quot; );
 
+    declareOption( ol, &quot;verbosity&quot;, &amp;PyPLearnScript::verbosity,
+                   OptionBase::buildoption,
+                   &quot;The verbosity level to set for this experiment&quot; );
+
+    declareOption( ol, &quot;module_names&quot;, &amp;PyPLearnScript::module_names,
+                   OptionBase::buildoption,
+                   &quot;Modules for which logging should be activated&quot; );
+
   
     // Now call the parent class' declareOptions
     inherited::declareOptions(ol);

Modified: trunk/plearn/io/PyPLearnScript.h
===================================================================
--- trunk/plearn/io/PyPLearnScript.h	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/plearn/io/PyPLearnScript.h	2007-06-05 20:11:02 UTC (rev 7542)
@@ -47,6 +47,8 @@
 #include &lt;plearn/base/Object.h&gt;
 #include &lt;plearn/io/PPath.h&gt;
 #include &lt;plearn/io/openString.h&gt;
+#include &lt;plearn/io/pl_log.h&gt;
+#include &lt;vector&gt;
 
 namespace PLearn {
 
@@ -145,7 +147,13 @@
 
     //! The expdir of the experiment described by the script
     PPath expdir;
-  
+
+    //! The verbosity level to set for this experiment
+    int verbosity;
+
+    //! Modules for which logging should be activated
+    vector&lt;string&gt; module_names;
+
     // ****************
     // * Constructors *
     // ****************

Modified: trunk/python_modules/plearn/pl_pygtk.py
===================================================================
--- trunk/python_modules/plearn/pl_pygtk.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/pl_pygtk.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -175,6 +175,8 @@
     def destroy(self):
         self.w_root.destroy()
 
+    def set_title(self, title):
+        self.w_root.set_title(title)
 
 #####  MessageBox (a la Windows)  ###########################################
 

Modified: trunk/python_modules/plearn/plide/plide_options.py
===================================================================
--- trunk/python_modules/plearn/plide/plide_options.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/plide/plide_options.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -33,7 +33,8 @@
 
 from plearn.utilities.metaprog import public_members
 #from plearn.pyplearn.pyplearn  import *
-from plearn.pyplearn           import *
+#from plearn.pyplearn           import *
+from plearn.pyplearn           import plargs
 from plearn.utilities.toolkit  import doc as toolkit_doc
 
 from plearn.pl_pygtk import GladeAppWindow, GladeDialog, MessageBox
@@ -67,13 +68,13 @@
         return self.group_object.is_plopt(option_name)
 
     def get_plopt( self, option_name ):
-        return self.group_object.get_plopt(option_name)
+        return self.group_object.getPlopt(option_name)
 
     def get( self, option_name ):
         return getattr(self.group_object, option_name)
 
     def set( self, option_name, option_value ):
-        if self.group_object.is_plopt(option_name):
+        if True or self.group_object.is_plopt(option_name):
             setattr(self.group_object, option_name, option_value)
         else:
             setattr(self.group_object, option_name,
@@ -88,7 +89,10 @@
     to initialize the PyPLearnOptionsDialog, which provides the view and
     controller for this object.
     &quot;&quot;&quot;
-    def __init__( self, script_name, script_code, script_directory ):
+    verbosity_map = { 0:0, 1:1, 2:5, 3:10, 4:500 }
+    inv_verb_map= dict([(y,x) for x,y in verbosity_map.iteritems()])
+    
+    def __init__( self, script_name, script_code, script_directory, namespaces= ['__ALL__'] ):
         self.script_name      = script_name
         self.script_code      = script_code
         self.launch_directory = script_directory
@@ -97,8 +101,8 @@
         self.log_enable       = [ &quot;__NONE__&quot; ]     # List of named logs to enable
         self.option_overrides = [ ]                # Manual overrides
         self.option_groups    = [ ]                # List of groups of script options
+        self.namespaces= namespaces
         
-
         ## Assume that the script has already been executed and is
         ## syntactically valid.  (More formal execution context passing for
         ## subclasses of plargs_namespace will come later)
@@ -108,14 +112,15 @@
         #     'GlobalOptions', public_members(plarg_defaults),
         #     plarg_defaults, 'Global Configuration Options'))
 
-        ## Look at all options in plargs_namespace
-        #for clsname,cls in plargs_namespace._subclasses.iteritems():
-        for clsname,cls in plnamespace._subclasses.iteritems():
-            short_doc = toolkit_doc(cls, 0).rstrip('.')
-            full_doc  = toolkit_doc(cls, 1, &quot;\n&quot;)
-            group = PyPLearnOptionsGroup(clsname, public_members(cls).keys(),
-                                         cls, short_doc, full_doc)
-            self.option_groups.append(group)
+        ## Look at all options in plnamespace
+        for cls in plargs.getNamespaces():
+            clsname= cls.__name__
+            if clsname in namespaces or '__ALL__' in namespaces:
+                short_doc = toolkit_doc(cls, 0).rstrip('.')
+                full_doc  = toolkit_doc(cls, 1, &quot;\n&quot;)
+                group = PyPLearnOptionsGroup(clsname, public_members(cls).keys(),
+                                             cls, short_doc, full_doc)
+                self.option_groups.append(group)
 
     def pyplearn_actualize( self ):
         &quot;&quot;&quot;Since the values of the fields in the options dialog box have
@@ -130,8 +135,7 @@
         if self.option_overrides:
             plargs.parse(self.option_overrides)
 
-        verbosity_map = { 0:0, 1:1, 2:5, 3:10, 4:500 }
-        verbosity = verbosity_map.get(self.log_verbosity, 5)
+        verbosity = self.verbosity_map.get(self.log_verbosity, 5)
         injected.loggingControl(verbosity, self.log_enable)
 
 
@@ -144,7 +148,8 @@
     def __init__( self, options_holder ):
         GladeDialog.__init__(self, gladeFile())
         self.options_holder = options_holder
-
+        self.set_title('Script Options ['+options_holder.script_name+']')
+        
         ## Fill out the first page of notebook
         self.w_launch_directory.set_text(options_holder.launch_directory)
         for v in options_holder.log_verbosities:
@@ -166,7 +171,7 @@
 
             ## The body of the notebook page is contained in a scrolled window
             scrolled = gtk.ScrolledWindow()
-            scrolled.set_policy(gtk.POLICY_NEVER, gtk.POLICY_AUTOMATIC)
+            scrolled.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
             scrolled.set_shadow_type(gtk.SHADOW_NONE)
             align = gtk.Alignment(xalign=0.0, yalign=0.0, xscale=1.0, yscale=1.0)
             align.set_padding(padding_top=8, padding_bottom=6,
@@ -199,6 +204,10 @@
             option_names.sort()
             table = gtk.Table(rows=len(option_names), columns=3, homogeneous=False)
             for i in xrange(len(option_names)):
+                option_object     = group.get_plopt(option_names[i])
+                if not option_object.getGui():
+                    continue
+
                 ## Option name
                 option_label = gtk.Label(option_names[i])
                 option_label.set_alignment(1.0, 0.5)   # Right align and middle-align
@@ -215,14 +224,14 @@
                 ## str      Combobox if multiple choices
                 ## str      Text entry field for unconstrained string
                 ## list     Text entry field
-                if group.is_plopt(option_names[i]):
-                    option_object     = group.get_plopt(option_names[i])
+                if True or group.is_plopt(option_names[i]):
+                    #option_object     = group.get_plopt(option_names[i])
                     option_value      = group.get(option_names[i])
-                    option_type       = option_object.get_type()
-                    option_docstr     = option_object.__doc__
-                    option_bounds     = option_object.get_bounds()
-                    option_choices    = option_object.get_choices()
-                    option_fr_choices = option_object.get_free_choices()
+                    option_type       = option_object.getType()
+                    option_docstr     = option_object._doc
+                    option_bounds     = option_object.getBounds()
+                    option_choices    = option_object.getChoices()
+                    option_fr_choices = option_object.getFreeChoices()
                 else:
                     option_value      = group.get(option_names[i])
                     option_type       = type(option_value)
@@ -304,7 +313,7 @@
                 option_input.show()
                 table.attach(option_input, left_attach=1, right_attach=2,
                              top_attach=i, bottom_attach=i+1,
-                             xoptions=gtk.EXPAND | gtk.FILL, yoptions=gtk.EXPAND | gtk.FILL,
+                             xoptions=gtk.EXPAND | gtk.FILL, yoptions=gtk.EXPAND ,
                              xpadding=4, ypadding=0)
 
                 ## Remember how to map the widget's contents into options
@@ -318,7 +327,7 @@
                 option_doc.show()
                 table.attach(option_doc, left_attach=2, right_attach=3,
                              top_attach=i, bottom_attach=i+1,
-                             xoptions=gtk.EXPAND | gtk.FILL, yoptions=gtk.EXPAND | gtk.FILL,
+                             xoptions=gtk.EXPAND | gtk.FILL , yoptions=gtk.EXPAND | gtk.FILL,
                              xpadding=4, ypadding=0)
 
             table.set_row_spacings(8)
@@ -344,7 +353,8 @@
         &quot;&quot;&quot;
         for (widget_getter, group, option_name) in self.widget_map:
             value = widget_getter()
-            group.set(option_name, value)
+            if value!='None':
+                group.set(option_name, value)
 
         ## Updates from the first page of the dialog
         self.options_holder.launch_directory = self.w_launch_directory.get_text()

Modified: trunk/python_modules/plearn/pybridge/test_embedded_code_snippet.py
===================================================================
--- trunk/python_modules/plearn/pybridge/test_embedded_code_snippet.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/pybridge/test_embedded_code_snippet.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -87,4 +87,8 @@
         gc.collect()
         return gc.get_referrers(self.recTest)
 
-pl_embedded_code_snippet_type= Machin
+class Truc(Machin, Bidule):
+    pass
+    
+
+pl_embedded_code_snippet_type= Truc

Modified: trunk/python_modules/plearn/pyext/__init__.py
===================================================================
--- trunk/python_modules/plearn/pyext/__init__.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/pyext/__init__.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -78,11 +78,22 @@
         return [ content[i*ncols:(i+1)*ncols] for i in range(nrows) ]
 
 
+from plearn.utilities.options_dialog import *
+verb, logs, namespaces, use_gui= getGuiInfo(sys.argv)
+
 # Enact the use of plargs: the current behavior is to consider as a plargs
 # any command-line argument that contains a '=' char and to neglect all
 # others
 plargs.parse([ arg for arg in sys.argv if arg.find('=') != -1 ])
 
+if use_gui:
+    runit, verb, logs= optionsDialog(sys.argv[0], plargs.expdir,
+                                     verb, logs, namespaces)
+    if not runit:
+        sys.exit()
+    loggingControl(verb, logs)
+
+
 if __name__ == &quot;__main__&quot;:
     class A(plargs):
         T = plopt(0)

Modified: trunk/python_modules/plearn/pyplearn/plargs.py
===================================================================
--- trunk/python_modules/plearn/pyplearn/plargs.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/pyplearn/plargs.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -299,6 +299,7 @@
     def __init__(self, value, **kwargs):
         self._name  = kwargs.pop(&quot;name&quot;, self.unnamed)
         self._doc   = kwargs.pop(&quot;doc&quot;, '')
+        self._gui   = kwargs.pop(&quot;gui&quot;, True)
 
         # type: This keyword can and must only be used when the default
         # value is None. Otherwise, it is infered using 'type(value)'.
@@ -416,6 +417,9 @@
     def getType(self):
         return self._type
 
+    def getGui(self):
+        return self._gui
+
     def reset(self):
         &quot;&quot;&quot;Simply deletes any override for this plopt in the current context.
         

Added: trunk/python_modules/plearn/utilities/options_dialog.py
===================================================================
--- trunk/python_modules/plearn/utilities/options_dialog.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/utilities/options_dialog.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -0,0 +1,113 @@
+#
+# options_dialog
+# Copyright (C) 2007 Xavier Saint-Mleux, ApSTAT Technologies inc.
+#
+#  Redistribution and use in source and binary forms, with or without
+#  modification, are permitted provided that the following conditions are met:
+#
+#   1. Redistributions of source code must retain the above copyright
+#      notice, this list of conditions and the following disclaimer.
+#
+#   2. Redistributions in binary form must reproduce the above copyright
+#      notice, this list of conditions and the following disclaimer in the
+#      documentation and/or other materials provided with the distribution.
+#
+#   3. The name of the authors may not be used to endorse or promote
+#      products derived from this software without specific prior written
+#      permission.
+#
+#  THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR
+#  IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+#  OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN
+#  NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+#  SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
+#  TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
+#  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
+#  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
+#  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+#  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+#
+#  This file is part of the PLearn library. For more information on the PLearn
+#  library, go to the PLearn Web site at www.plearn.org
+
+from plearn.plide.plide_options import *
+import sys, os
+
+def getVerbosity(args):
+    &quot;&quot;&quot;
+    get verbosity from PLearn
+    &quot;&quot;&quot;
+    verb_pos= -1
+    for i in range(len(args)):
+        if args[i].startswith('--verbosity='):
+            verb_pos= i
+    verb= 5
+    if verb_pos &gt;= 0:
+        verb= int(args[verb_pos].split('=')[1])
+    return verb, verb_pos
+
+def getModulesToLog(args):
+    &quot;&quot;&quot;
+    get modules to log
+    &quot;&quot;&quot;
+    logs_pos= -1
+    for i in range(len(args)):
+        if args[i].startswith('--named-logging='):
+            logs_pos= i
+    logs= ['__NONE__']
+    if logs_pos &gt;= 0:
+        logs= args[logs_pos].split('=')[1].split(',')
+    return logs, logs_pos
+
+def getGuiNamespaces(args):
+    gui_pos= -1
+    # get +gui option
+    for i in range(len(args)):
+        if args[i].startswith('+gui'):
+            gui_pos= i
+    gui_namespaces= ['__ALL__']
+    if gui_pos &gt;= 0:
+        x= args[gui_pos].split(':')
+        if len(x)&gt;1:
+            gui_namespaces= x[1].split(',')
+    return gui_namespaces, gui_pos
+
+def getGuiInfo(args):
+    &quot;&quot;&quot;
+    get verbosity, modules to log and
+    namespaces from command line
+    &quot;&quot;&quot;
+    verb, pos= getVerbosity(args)
+    if pos &gt;= 0: del args[pos]
+    logs, pos= getModulesToLog(args)
+    if pos &gt;= 0: del args[pos]
+    namespaces, pos= getGuiNamespaces(args)
+    if pos &gt;= 0: del args[pos]
+    return verb, logs, namespaces, pos&gt;=0
+
+def gladeFile():
+    import plearn.plide.plide
+    return os.path.join(os.path.dirname(plearn.utilities.options_dialog.__file__),
+                        &quot;resources&quot;, &quot;options_dialog.glade&quot;)
+
+def optionsDialog(name, expdir, verbosity, named_logging, namespaces):
+    &quot;&quot;&quot;
+    pop a dialog showing all plnamespaces
+    &quot;&quot;&quot;
+    PyPLearnOptionsDialog.define_injected(None, gladeFile)
+    options_holder= PyPLearnOptionsHolder(name, None, expdir, namespaces)
+    options_holder.log_enable= named_logging
+    ks= options_holder.inv_verb_map.keys()
+    ks.sort()
+    for k in ks:
+        if k &lt;= verbosity:
+            options_holder.log_verbosity= options_holder.inv_verb_map[k]
+    options_dialog= PyPLearnOptionsDialog(options_holder)
+    result= options_dialog.run()
+    if result == gtk.RESPONSE_OK:
+        options_dialog.update_options_holder()
+    options_dialog.destroy()
+    #plargs.expdir= options_holder.launch_directory
+    return result == gtk.RESPONSE_OK, \
+           options_holder.verbosity_map.get(options_holder.log_verbosity, 5), \
+           options_holder.log_enable

Added: trunk/python_modules/plearn/utilities/resources/options_dialog.glade
===================================================================
--- trunk/python_modules/plearn/utilities/resources/options_dialog.glade	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/python_modules/plearn/utilities/resources/options_dialog.glade	2007-06-05 20:11:02 UTC (rev 7542)
@@ -0,0 +1,480 @@
+&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt; &lt;!--*- mode: xml -*--&gt;
+&lt;!DOCTYPE glade-interface SYSTEM &quot;<A HREF="http://glade.gnome.org/glade-2.0.dtd">http://glade.gnome.org/glade-2.0.dtd</A>&quot;&gt;
+
+&lt;glade-interface&gt;
+
+&lt;widget class=&quot;GtkDialog&quot; id=&quot;PyPLearnOptionsDialog&quot;&gt;
+  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;title&quot; translatable=&quot;yes&quot;&gt;Script Options&lt;/property&gt;
+  &lt;property name=&quot;type&quot;&gt;GTK_WINDOW_TOPLEVEL&lt;/property&gt;
+  &lt;property name=&quot;window_position&quot;&gt;GTK_WIN_POS_NONE&lt;/property&gt;
+  &lt;property name=&quot;modal&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;default_width&quot;&gt;700&lt;/property&gt;
+  &lt;property name=&quot;default_height&quot;&gt;480&lt;/property&gt;
+  &lt;property name=&quot;resizable&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;destroy_with_parent&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;decorated&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;skip_taskbar_hint&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;skip_pager_hint&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;type_hint&quot;&gt;GDK_WINDOW_TYPE_HINT_DIALOG&lt;/property&gt;
+  &lt;property name=&quot;gravity&quot;&gt;GDK_GRAVITY_NORTH_WEST&lt;/property&gt;
+  &lt;property name=&quot;focus_on_map&quot;&gt;True&lt;/property&gt;
+  &lt;property name=&quot;urgency_hint&quot;&gt;False&lt;/property&gt;
+  &lt;property name=&quot;has_separator&quot;&gt;True&lt;/property&gt;
+
+  &lt;child internal-child=&quot;vbox&quot;&gt;
+    &lt;widget class=&quot;GtkVBox&quot; id=&quot;dialog_vbox1&quot;&gt;
+      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+      &lt;property name=&quot;spacing&quot;&gt;0&lt;/property&gt;
+
+      &lt;child internal-child=&quot;action_area&quot;&gt;
+	&lt;widget class=&quot;GtkHButtonBox&quot; id=&quot;dialog_action_area1&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;layout_style&quot;&gt;GTK_BUTTONBOX_END&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;button3&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-cancel&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-6&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkButton&quot; id=&quot;button4&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;label&quot;&gt;gtk-ok&lt;/property&gt;
+	      &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+	      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;response_id&quot;&gt;-5&lt;/property&gt;
+	    &lt;/widget&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;pack_type&quot;&gt;GTK_PACK_END&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+
+      &lt;child&gt;
+	&lt;widget class=&quot;GtkVBox&quot; id=&quot;options_vbox&quot;&gt;
+	  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+	  &lt;property name=&quot;spacing&quot;&gt;8&lt;/property&gt;
+
+	  &lt;child&gt;
+	    &lt;widget class=&quot;GtkAlignment&quot; id=&quot;alignment1&quot;&gt;
+	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+	      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+	      &lt;property name=&quot;xscale&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;yscale&quot;&gt;1&lt;/property&gt;
+	      &lt;property name=&quot;top_padding&quot;&gt;4&lt;/property&gt;
+	      &lt;property name=&quot;bottom_padding&quot;&gt;4&lt;/property&gt;
+	      &lt;property name=&quot;left_padding&quot;&gt;4&lt;/property&gt;
+	      &lt;property name=&quot;right_padding&quot;&gt;4&lt;/property&gt;
+
+	      &lt;child&gt;
+		&lt;widget class=&quot;GtkNotebook&quot; id=&quot;option_groups&quot;&gt;
+		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;show_tabs&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;show_border&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;tab_pos&quot;&gt;GTK_POS_TOP&lt;/property&gt;
+		  &lt;property name=&quot;scrollable&quot;&gt;True&lt;/property&gt;
+		  &lt;property name=&quot;enable_popup&quot;&gt;False&lt;/property&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;scrolledwindow1&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+		      &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+		      &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_NONE&lt;/property&gt;
+		      &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkViewport&quot; id=&quot;viewport5&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_NONE&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkAlignment&quot; id=&quot;alignment4&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;xscale&quot;&gt;1&lt;/property&gt;
+			      &lt;property name=&quot;yscale&quot;&gt;1&lt;/property&gt;
+			      &lt;property name=&quot;top_padding&quot;&gt;6&lt;/property&gt;
+			      &lt;property name=&quot;bottom_padding&quot;&gt;4&lt;/property&gt;
+			      &lt;property name=&quot;left_padding&quot;&gt;6&lt;/property&gt;
+			      &lt;property name=&quot;right_padding&quot;&gt;6&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkTable&quot; id=&quot;table1&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;n_rows&quot;&gt;3&lt;/property&gt;
+				  &lt;property name=&quot;n_columns&quot;&gt;2&lt;/property&gt;
+				  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;row_spacing&quot;&gt;5&lt;/property&gt;
+				  &lt;property name=&quot;column_spacing&quot;&gt;5&lt;/property&gt;
+
+				  &lt;child&gt;
+				    &lt;widget class=&quot;GtkLabel&quot; id=&quot;label5&quot;&gt;
+				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;PLearn logs verbosity&lt;/property&gt;
+				      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;use_markup&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_RIGHT&lt;/property&gt;
+				      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;xalign&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				    &lt;/widget&gt;
+				    &lt;packing&gt;
+				      &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+				      &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
+				    &lt;/packing&gt;
+				  &lt;/child&gt;
+
+				  &lt;child&gt;
+				    &lt;widget class=&quot;GtkLabel&quot; id=&quot;label6&quot;&gt;
+				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Named logs to activate&lt;/property&gt;
+				      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;use_markup&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_RIGHT&lt;/property&gt;
+				      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;xalign&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				    &lt;/widget&gt;
+				    &lt;packing&gt;
+				      &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;top_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;bottom_attach&quot;&gt;3&lt;/property&gt;
+				      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+				      &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
+				    &lt;/packing&gt;
+				  &lt;/child&gt;
+
+				  &lt;child&gt;
+				    &lt;widget class=&quot;GtkComboBox&quot; id=&quot;plearn_log_verbosity&quot;&gt;
+				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;items&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+				      &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+				    &lt;/widget&gt;
+				    &lt;packing&gt;
+				      &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+				      &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
+				    &lt;/packing&gt;
+				  &lt;/child&gt;
+
+				  &lt;child&gt;
+				    &lt;widget class=&quot;GtkEntry&quot; id=&quot;named_logs_activate&quot;&gt;
+				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;editable&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;visibility&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;max_length&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+				      &lt;property name=&quot;has_frame&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;invisible_char&quot;&gt;*&lt;/property&gt;
+				      &lt;property name=&quot;activates_default&quot;&gt;False&lt;/property&gt;
+				    &lt;/widget&gt;
+				    &lt;packing&gt;
+				      &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;top_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;bottom_attach&quot;&gt;3&lt;/property&gt;
+				      &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
+				    &lt;/packing&gt;
+				  &lt;/child&gt;
+
+				  &lt;child&gt;
+				    &lt;widget class=&quot;GtkHBox&quot; id=&quot;hbox2&quot;&gt;
+				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;spacing&quot;&gt;2&lt;/property&gt;
+
+				      &lt;child&gt;
+					&lt;widget class=&quot;GtkEntry&quot; id=&quot;launch_directory&quot;&gt;
+					  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+					  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+					  &lt;property name=&quot;editable&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;visibility&quot;&gt;True&lt;/property&gt;
+					  &lt;property name=&quot;max_length&quot;&gt;0&lt;/property&gt;
+					  &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+					  &lt;property name=&quot;has_frame&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;invisible_char&quot;&gt;*&lt;/property&gt;
+					  &lt;property name=&quot;activates_default&quot;&gt;False&lt;/property&gt;
+					&lt;/widget&gt;
+					&lt;packing&gt;
+					  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+					  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+					  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+					&lt;/packing&gt;
+				      &lt;/child&gt;
+
+				      &lt;child&gt;
+					&lt;widget class=&quot;GtkButton&quot; id=&quot;pick_directory&quot;&gt;
+					  &lt;property name=&quot;sensitive&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
+					  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
+					  &lt;signal name=&quot;clicked&quot; handler=&quot;on_pick_directory_clicked&quot; last_modification_time=&quot;Thu, 27 Apr 2006 17:54:45 GMT&quot;/&gt;
+
+					  &lt;child&gt;
+					    &lt;widget class=&quot;GtkImage&quot; id=&quot;image36&quot;&gt;
+					      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+					      &lt;property name=&quot;stock&quot;&gt;gtk-directory&lt;/property&gt;
+					      &lt;property name=&quot;icon_size&quot;&gt;4&lt;/property&gt;
+					      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+					      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+					      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+					      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+					    &lt;/widget&gt;
+					  &lt;/child&gt;
+					&lt;/widget&gt;
+					&lt;packing&gt;
+					  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+					  &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+					  &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+					&lt;/packing&gt;
+				      &lt;/child&gt;
+				    &lt;/widget&gt;
+				    &lt;packing&gt;
+				      &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
+				      &lt;property name=&quot;top_attach&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;bottom_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+				      &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
+				    &lt;/packing&gt;
+				  &lt;/child&gt;
+
+				  &lt;child&gt;
+				    &lt;widget class=&quot;GtkLabel&quot; id=&quot;label8&quot;&gt;
+				      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Experiment directory [read-only]&lt;/property&gt;
+				      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_RIGHT&lt;/property&gt;
+				      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+				      &lt;property name=&quot;xpad&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;ypad&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+				      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+				      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+				      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+				    &lt;/widget&gt;
+				    &lt;packing&gt;
+				      &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;top_attach&quot;&gt;0&lt;/property&gt;
+				      &lt;property name=&quot;bottom_attach&quot;&gt;1&lt;/property&gt;
+				      &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
+				      &lt;property name=&quot;y_options&quot;&gt;&lt;/property&gt;
+				    &lt;/packing&gt;
+				  &lt;/child&gt;
+				&lt;/widget&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+		      &lt;/child&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;tab_expand&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;tab_fill&quot;&gt;True&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkLabel&quot; id=&quot;label3&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;&lt;b&gt;General Settings&lt;/b&gt;&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;use_markup&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+		      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;xpad&quot;&gt;2&lt;/property&gt;
+		      &lt;property name=&quot;ypad&quot;&gt;2&lt;/property&gt;
+		      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+		      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+		      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;type&quot;&gt;tab&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkAlignment&quot; id=&quot;alignment2&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;xalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;xscale&quot;&gt;1&lt;/property&gt;
+		      &lt;property name=&quot;yscale&quot;&gt;1&lt;/property&gt;
+		      &lt;property name=&quot;top_padding&quot;&gt;8&lt;/property&gt;
+		      &lt;property name=&quot;bottom_padding&quot;&gt;6&lt;/property&gt;
+		      &lt;property name=&quot;left_padding&quot;&gt;8&lt;/property&gt;
+		      &lt;property name=&quot;right_padding&quot;&gt;6&lt;/property&gt;
+
+		      &lt;child&gt;
+			&lt;widget class=&quot;GtkVBox&quot; id=&quot;manual_script_options_vbox&quot;&gt;
+			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
+			  &lt;property name=&quot;spacing&quot;&gt;4&lt;/property&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkLabel&quot; id=&quot;manual_script_options_doc&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Enter manual script options of the form &lt;i&gt;&lt;b&gt;Option1=Value1 Option2=Value2 ...&lt;/b&gt;&lt;/i&gt;&lt;/property&gt;
+			      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;use_markup&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+			      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+			      &lt;property name=&quot;xpad&quot;&gt;2&lt;/property&gt;
+			      &lt;property name=&quot;ypad&quot;&gt;2&lt;/property&gt;
+			      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+			      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+			      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+
+			  &lt;child&gt;
+			    &lt;widget class=&quot;GtkScrolledWindow&quot; id=&quot;scrolledwindow2&quot;&gt;
+			      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;hscrollbar_policy&quot;&gt;GTK_POLICY_NEVER&lt;/property&gt;
+			      &lt;property name=&quot;vscrollbar_policy&quot;&gt;GTK_POLICY_AUTOMATIC&lt;/property&gt;
+			      &lt;property name=&quot;shadow_type&quot;&gt;GTK_SHADOW_IN&lt;/property&gt;
+			      &lt;property name=&quot;window_placement&quot;&gt;GTK_CORNER_TOP_LEFT&lt;/property&gt;
+
+			      &lt;child&gt;
+				&lt;widget class=&quot;GtkTextView&quot; id=&quot;manual_script_options&quot;&gt;
+				  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;editable&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;overwrite&quot;&gt;False&lt;/property&gt;
+				  &lt;property name=&quot;accepts_tab&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;justification&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+				  &lt;property name=&quot;wrap_mode&quot;&gt;GTK_WRAP_WORD&lt;/property&gt;
+				  &lt;property name=&quot;cursor_visible&quot;&gt;True&lt;/property&gt;
+				  &lt;property name=&quot;pixels_above_lines&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;pixels_below_lines&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;pixels_inside_wrap&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;left_margin&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;right_margin&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;indent&quot;&gt;0&lt;/property&gt;
+				  &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
+				&lt;/widget&gt;
+			      &lt;/child&gt;
+			    &lt;/widget&gt;
+			    &lt;packing&gt;
+			      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+			      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+			      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+			    &lt;/packing&gt;
+			  &lt;/child&gt;
+			&lt;/widget&gt;
+		      &lt;/child&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;tab_expand&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;tab_fill&quot;&gt;True&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+
+		  &lt;child&gt;
+		    &lt;widget class=&quot;GtkLabel&quot; id=&quot;label7&quot;&gt;
+		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;&lt;b&gt;Manual Options&lt;/b&gt;&lt;/property&gt;
+		      &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;use_markup&quot;&gt;True&lt;/property&gt;
+		      &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
+		      &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
+		      &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
+		      &lt;property name=&quot;xpad&quot;&gt;2&lt;/property&gt;
+		      &lt;property name=&quot;ypad&quot;&gt;2&lt;/property&gt;
+		      &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
+		      &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
+		      &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
+		      &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
+		    &lt;/widget&gt;
+		    &lt;packing&gt;
+		      &lt;property name=&quot;type&quot;&gt;tab&lt;/property&gt;
+		    &lt;/packing&gt;
+		  &lt;/child&gt;
+		&lt;/widget&gt;
+	      &lt;/child&gt;
+	    &lt;/widget&gt;
+	    &lt;packing&gt;
+	      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	    &lt;/packing&gt;
+	  &lt;/child&gt;
+	&lt;/widget&gt;
+	&lt;packing&gt;
+	  &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
+	  &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
+	  &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
+	&lt;/packing&gt;
+      &lt;/child&gt;
+    &lt;/widget&gt;
+  &lt;/child&gt;
+&lt;/widget&gt;
+
+&lt;/glade-interface&gt;

Modified: trunk/scripts/pyplearn_driver.py
===================================================================
--- trunk/scripts/pyplearn_driver.py	2007-06-05 19:51:00 UTC (rev 7541)
+++ trunk/scripts/pyplearn_driver.py	2007-06-05 20:11:02 UTC (rev 7542)
@@ -13,6 +13,19 @@
 lines = pyplearn_file.read()
 pyplearn_file.close()
 
+from plearn.utilities import options_dialog
+orig_verb, orig_logs, gui_namespaces, use_gui= options_dialog.getGuiInfo(sys.argv)
+
+gui_code= &quot;&quot;&quot;
+from plearn.utilities import options_dialog
+runit, verb, logs= options_dialog.optionsDialog(%s,plargs.expdir,%d,%s,%s)
+&quot;&quot;&quot;%(repr(sys.argv[1]),orig_verb,repr(orig_logs),repr(gui_namespaces))
+
+if use_gui:
+    lines+= gui_code
+else:
+    lines+= &quot;\nrunit, verb, logs= True, %d, %s\n&quot;%(orig_verb,repr(orig_logs))
+
 if len(sys.argv) == 3 and sys.argv[2] == '--help':
     # Simply print the docstring of the pyplearn script
     lines += 'print __doc__\n'
@@ -21,12 +34,13 @@
     # expdirs.
     sys.argv.remove('--PyPLearnScript')
     plargs.parse(sys.argv[2:])
-    lines += 'print PyPLearnScript( main() )\n'
+    lines += 'if runit: print PyPLearnScript( main(), verbosity= verb, module_names= logs)\nelse: print PyPLearnScript(&quot;&quot;)\n'
 else:
     # Default mode: simply dump the plearn_representation of this
     plargs.parse(sys.argv[2:])
-    lines += 'print main()\n'
+    lines += 'if runit: print main()\nelse: print PyPLearnScript(&quot;&quot;)\n'
 
+
 # Closing the current context so that, for instance, mispelled plargs can
 # be identified.
 lines += &quot;import plearn; plearn.pyplearn.context.closeCurrentContext(); del plearn\n&quot;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000990.html">[Plearn-commits] r7541 - trunk/python_modules/plearn/learners/autolr
</A></li>
	<LI>Next message: <A HREF="000992.html">[Plearn-commits] r7543 - trunk/python_modules/plearn/utilities
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#991">[ date ]</a>
              <a href="thread.html#991">[ thread ]</a>
              <a href="subject.html#991">[ subject ]</a>
              <a href="author.html#991">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plearn-commits">More information about the Plearn-commits
mailing list</a><br>
</body></html>
