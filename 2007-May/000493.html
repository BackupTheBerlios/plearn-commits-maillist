<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plearn-commits] r7044 - in trunk/plearn/python: . test	test/.pytest/EmbeddedPython_Instances/expected_results
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plearn-commits/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r7044%20-%20in%20trunk/plearn/python%3A%20.%20test%0A%09test/.pytest/EmbeddedPython_Instances/expected_results&In-Reply-To=%3C200705100139.l4A1df0P024116%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000492.html">
   <LINK REL="Next"  HREF="000494.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plearn-commits] r7044 - in trunk/plearn/python: . test	test/.pytest/EmbeddedPython_Instances/expected_results</H1>
    <B>saintmlx at BerliOS</B> 
    <A HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r7044%20-%20in%20trunk/plearn/python%3A%20.%20test%0A%09test/.pytest/EmbeddedPython_Instances/expected_results&In-Reply-To=%3C200705100139.l4A1df0P024116%40sheep.berlios.de%3E"
       TITLE="[Plearn-commits] r7044 - in trunk/plearn/python: . test	test/.pytest/EmbeddedPython_Instances/expected_results">saintmlx at mail.berlios.de
       </A><BR>
    <I>Thu May 10 03:39:41 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000492.html">[Plearn-commits] r7043 - trunk/plearn_learners/online
</A></li>
        <LI>Next message: <A HREF="000494.html">[Plearn-commits] r7045 - in trunk/plearn/python/test: .	.pytest/EmbeddedPython_Instances/expected_results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#493">[ date ]</a>
              <a href="thread.html#493">[ thread ]</a>
              <a href="subject.html#493">[ subject ]</a>
              <a href="author.html#493">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: saintmlx
Date: 2007-05-10 03:39:40 +0200 (Thu, 10 May 2007)
New Revision: 7044

Modified:
   trunk/plearn/python/PythonCodeSnippet.cc
   trunk/plearn/python/test/.pytest/EmbeddedPython_Instances/expected_results/RUN.log
   trunk/plearn/python/test/InstanceSnippetTest.cc
Log:
- &quot;fixed&quot; EmbeddedPython_Instances test 



Modified: trunk/plearn/python/PythonCodeSnippet.cc
===================================================================
--- trunk/plearn/python/PythonCodeSnippet.cc	2007-05-09 23:59:26 UTC (rev 7043)
+++ trunk/plearn/python/PythonCodeSnippet.cc	2007-05-10 01:39:40 UTC (rev 7044)
@@ -350,6 +350,7 @@
         }
         
         return_value = PyObject_CallObject(pFunc, pArgs);
+
         Py_DECREF(pArgs);
         if (! return_value)
             handlePythonErrors(string(&quot;Error while calling function '&quot;)

Modified: trunk/plearn/python/test/.pytest/EmbeddedPython_Instances/expected_results/RUN.log
===================================================================
--- trunk/plearn/python/test/.pytest/EmbeddedPython_Instances/expected_results/RUN.log	2007-05-09 23:59:26 UTC (rev 7043)
+++ trunk/plearn/python/test/.pytest/EmbeddedPython_Instances/expected_results/RUN.log	2007-05-10 01:39:40 UTC (rev 7044)
@@ -312,7 +312,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
     raise RuntimeError, 'Crash on purpose: test'
 RuntimeError: Crash on purpose: test
 
@@ -328,7 +328,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 70, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 70, in testRecCrash
     self.recTestCrash(n-1)
 Exception: RuntimeError
 Python 2.X.Y: /usr/bin/python
@@ -356,7 +356,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
     raise RuntimeError, 'Crash on purpose: test'
 RuntimeError: Crash on purpose: test
 
@@ -374,7 +374,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 70, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 70, in testRecCrash
     self.recTestCrash(n-1)
 Exception: Exception
 Python 2.X.Y: /usr/bin/python
@@ -416,7 +416,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
     raise RuntimeError, 'Crash on purpose: test'
 RuntimeError: Crash on purpose: test
 
@@ -432,7 +432,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 70, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 70, in testRecCrash
     self.recTestCrash(n-1)
 Exception: RuntimeError
 Python 2.X.Y: /usr/bin/python
@@ -460,7 +460,7 @@
 the original traceback:
 
 Traceback (most recent call last):
-  File &quot;/home/saintmlx/PLearn/python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
+  File &quot;PLEARNDIR:python_modules/plearn/pybridge/test_embedded_code_snippet.py&quot;, line 66, in testRecCrash
     raise RuntimeError, 'Crash on purpose: test'
 RuntimeError: Crash on purpose: test
 

Modified: trunk/plearn/python/test/InstanceSnippetTest.cc
===================================================================
--- trunk/plearn/python/test/InstanceSnippetTest.cc	2007-05-09 23:59:26 UTC (rev 7043)
+++ trunk/plearn/python/test/InstanceSnippetTest.cc	2007-05-10 01:39:40 UTC (rev 7044)
@@ -156,7 +156,7 @@
     {
         zz1.invoke(&quot;testRecCrash&quot;, 3);
     }
-    catch(const PLearnError&amp; e)
+    catch(const PythonException&amp; e)
     {
         string exception_msg = e.message();
         // Remove memory addresses from the exception message, as they may
@@ -171,6 +171,11 @@
         msg_without_sys_dependent_data =
             regex_replace(msg_without_sys_dependent_data, python_ver,
                     &quot;Python 2.X.Y&quot;);
+        boost::regex plearn_path(&quot;(/[a-zA-Z0-9_-]+)+/PLearn/&quot;,
+                                boost::regex::perl);
+        msg_without_sys_dependent_data =
+            regex_replace(msg_without_sys_dependent_data, plearn_path,
+                    &quot;PLEARNDIR:&quot;);
         pout &lt;&lt; &quot;[INTENDED ERROR] Caught Python Exception: '&quot; 
              &lt;&lt; msg_without_sys_dependent_data
              &lt;&lt; &quot;'&quot; &lt;&lt; endl;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000492.html">[Plearn-commits] r7043 - trunk/plearn_learners/online
</A></li>
	<LI>Next message: <A HREF="000494.html">[Plearn-commits] r7045 - in trunk/plearn/python/test: .	.pytest/EmbeddedPython_Instances/expected_results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#493">[ date ]</a>
              <a href="thread.html#493">[ thread ]</a>
              <a href="subject.html#493">[ subject ]</a>
              <a href="author.html#493">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plearn-commits">More information about the Plearn-commits
mailing list</a><br>
</body></html>
