<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plearn-commits] r8599 - in	trunk/plearn_learners/generic/test/NNet: . .pytest	.pytest/PL_NNet_Bags .pytest/PL_NNet_Bags/expected_results	.pytest/PL_NNet_Bags/expected_results/expdir-nnet	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plearn-commits/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r8599%20-%20in%0A%09trunk/plearn_learners/generic/test/NNet%3A%20.%20.pytest%0A%09.pytest/PL_NNet_Bags%20.pytest/PL_NNet_Bags/expected_results%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata&In-Reply-To=%3C200802281914.m1SJElR8010057%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002046.html">
   <LINK REL="Next"  HREF="002048.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plearn-commits] r8599 - in	trunk/plearn_learners/generic/test/NNet: . .pytest	.pytest/PL_NNet_Bags .pytest/PL_NNet_Bags/expected_results	.pytest/PL_NNet_Bags/expected_results/expdir-nnet	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata</H1>
    <B>tihocan at BerliOS</B> 
    <A HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r8599%20-%20in%0A%09trunk/plearn_learners/generic/test/NNet%3A%20.%20.pytest%0A%09.pytest/PL_NNet_Bags%20.pytest/PL_NNet_Bags/expected_results%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata%0A%09.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata&In-Reply-To=%3C200802281914.m1SJElR8010057%40sheep.berlios.de%3E"
       TITLE="[Plearn-commits] r8599 - in	trunk/plearn_learners/generic/test/NNet: . .pytest	.pytest/PL_NNet_Bags .pytest/PL_NNet_Bags/expected_results	.pytest/PL_NNet_Bags/expected_results/expdir-nnet	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata	.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata">tihocan at mail.berlios.de
       </A><BR>
    <I>Thu Feb 28 20:14:47 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="002046.html">[Plearn-commits] r8598 - trunk/examples/data/test_suite
</A></li>
        <LI>Next message: <A HREF="002048.html">[Plearn-commits] r8600 - trunk/plearn/var
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2047">[ date ]</a>
              <a href="thread.html#2047">[ thread ]</a>
              <a href="subject.html#2047">[ subject ]</a>
              <a href="author.html#2047">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: tihocan
Date: 2008-02-28 20:14:47 +0100 (Thu, 28 Feb 2008)
New Revision: 8599

Added:
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/RUN.log
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0/final_learner.psave
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames
   trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes
   trunk/plearn_learners/generic/test/NNet/nnet_bags.pyplearn
Modified:
   trunk/plearn_learners/generic/test/NNet/pytest.config
Log:
Added new test of a NNet operating on bags


Property changes on: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags
___________________________________________________________________
Name: svn:ignore
   + .plearn
run_results
PSAVEDIFF


Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/RUN.log
===================================================================

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0/final_learner.psave
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0/final_learner.psave	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/Split0/final_learner.psave	2008-02-28 19:14:47 UTC (rev 8599)
@@ -0,0 +1,64 @@
+*1 -&gt;NNet(
+nhidden = 10 ;
+nhidden2 = 0 ;
+noutputs = 3 ;
+weight_decay = 0 ;
+bias_decay = 0 ;
+layer1_weight_decay = 0 ;
+layer1_bias_decay = 0 ;
+layer2_weight_decay = 0 ;
+layer2_bias_decay = 0 ;
+output_layer_weight_decay = 0 ;
+output_layer_bias_decay = 0 ;
+direct_in_to_out_weight_decay = 0 ;
+penalty_type = &quot;L2_square&quot; ;
+L1_penalty = 0 ;
+fixed_output_weights = 0 ;
+input_reconstruction_penalty = 0 ;
+direct_in_to_out = 0 ;
+rbf_layer_size = 0 ;
+first_class_is_junk = 1 ;
+output_transfer_func = &quot;softmax&quot; ;
+hidden_transfer_func = &quot;tanh&quot; ;
+cost_funcs = 1 [ &quot;NLL&quot; ] ;
+classification_regularizer = 0 ;
+first_hidden_layer = *0 ;
+first_hidden_layer_is_output = 0 ;
+n_non_params_in_first_hidden_layer = 0 ;
+transpose_first_hidden_layer = 0 ;
+margin = 1 ;
+do_not_change_params = 0 ;
+optimizer = *2 -&gt;GradientOptimizer(
+start_learning_rate = 0.100000000000000006 ;
+learning_rate = 0.100000000000000006 ;
+decrease_constant = 0 ;
+lr_schedule = 0  0  [ 
+]
+;
+use_stochastic_hack = 0 ;
+verbosity = 0 ;
+nstages = 1  )
+;
+batch_size = 0 ;
+initialization_method = &quot;uniform_linear&quot; ;
+operate_on_bags = 1 ;
+max_bag_size = 20 ;
+paramsvalues = 73 [ -0.264371813933822586 -0.205331393475229718 0.294763050648583658 0.105289000631594784 -0.0600026001346709026 -0.0127392290430181788 0.185606746681020646 -0.146029102499062757 -0.035236628856851554 0.494463642020458116 0.393139162922157281 0.440366736932692793 -0.267097090638493184 0.145480678130172292 0.380941902198827065 -0.107676958597727371 -0.408938431273406844 0.177410084672891211 0.0851483841469526936 -0.385202883323724099 0.248204980519073803 0.0796150189345870285 -0.048167412239538715 -0.570596016554755447 -0.326360881269845637 0.0034805846719268012 0.227583204665000316 0.39565382264075305 -0.135264412864009614 -0.341423445754042321 0.191578842355264789 0.189870922901048761 -0.487345364775797374 0.0139964824590312533 0.142618001875924688 0.0938651429187691011 -0.383816497606948581 0.135487639409365007 0.251265360744742317 -0.382071708616923356 0.420885891542839952 0.00468512346816874967 -0.425571015011008635 -0.470708339942575216 0.00854415616643!
 394021 0.298523787303021149 -0.311283749677584431 -0.135230854662720279 0.327952925466075185 0.358211698449398486 0.0436491958188225671 -0.504830864988569328 0.366310796329157806 -0.285490748564436347 -0.0400430791403840053 0.0343099477420112861 -0.34074858124809787 0.266057385700989746 -0.0659685760370418844 -0.0248485353448619009 -0.041971485702691845 0.195540425483182012 0.356120514577813407 -0.364622987168045753 -0.329868801987559246 0.178574560024803763 0.184561957317535025 -0.0293825910408284166 -0.173932379519760538 0.136426789459912712 0.570971748588152583 -0.0287276061742493087 -0.565704503389098168 ] ;
+random_gen = *3 -&gt;PRandom(
+seed = 1827 ;
+fixed_seed = 0  )
+;
+seed = 1827 ;
+stage = 100 ;
+n_examples = 6 ;
+inputsize = 3 ;
+targetsize = 2 ;
+weightsize = 0 ;
+forget_when_training_set_changes = 0 ;
+nstages = 100 ;
+report_progress = 1 ;
+verbosity = 1 ;
+nservers = 0 ;
+save_trainingset_prefix = &quot;&quot; ;
+test_minibatch_size = 1 ;
+use_a_separate_random_generator_for_testing = 1827  )

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat
===================================================================
(Binary files differ)


Property changes on: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/fieldnames	2008-02-28 19:14:47 UTC (rev 8599)
@@ -0,0 +1 @@
+E[test1.E[NLL]]	0

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/global_stats.pmat.metadata/sizes	2008-02-28 19:14:47 UTC (rev 8599)
@@ -0,0 +1 @@
+-1 -1 -1 0 

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat
===================================================================
(Binary files differ)


Property changes on: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/fieldnames	2008-02-28 19:14:47 UTC (rev 8599)
@@ -0,0 +1,2 @@
+splitnum	0
+test1.E[NLL]	0

Added: trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes
===================================================================
--- trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/.pytest/PL_NNet_Bags/expected_results/expdir-nnet/split_stats.pmat.metadata/sizes	2008-02-28 19:14:47 UTC (rev 8599)
@@ -0,0 +1 @@
+-1 -1 -1 0 

Added: trunk/plearn_learners/generic/test/NNet/nnet_bags.pyplearn
===================================================================
--- trunk/plearn_learners/generic/test/NNet/nnet_bags.pyplearn	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/nnet_bags.pyplearn	2008-02-28 19:14:47 UTC (rev 8599)
@@ -0,0 +1,42 @@
+# NNet operating on bags.
+
+from plearn.pyplearn import pl
+import plearn
+
+plarg_defaults.operate_on_bags = True
+plarg_defaults.nstages = 100
+plarg_defaults.lr = 0.1
+plarg_defaults.datafile = 'PLEARNDIR:examples/data/test_suite/toy_multi_class_bags.amat'
+
+nnet = pl.NNet(
+        cost_funcs = [ 'NLL' ],
+        operate_on_bags = plargs.operate_on_bags,
+        nhidden = 10,
+        noutputs = 3,
+        nstages = plargs.nstages,
+        batch_size = 0,
+        optimizer = pl.GradientOptimizer(
+            start_learning_rate = plargs.lr,
+            ),
+        output_transfer_func = 'softmax',
+        verbosity = 1,
+        )
+expdir = 'expdir-nnet'# % plearn.utilities.toolkit.date_time_string()
+tester = pl.PTester(
+        expdir = expdir,
+        learner = nnet,
+        dataset = pl.AutoVMatrix( filename = plargs.datafile ),
+        statnames = [ 'E[test1.E[NLL]]' ],
+        splitter = pl.FractionSplitter(
+            splits = TMat(1, 2, [ (0, 1), (0, 1) ]),
+            ),
+        save_initial_tester = False,
+        save_stat_collectors = False,
+        save_test_names = False,
+        save_test_outputs = False,
+        #final_commands = [ 'plearn vmat cat %s/Split0/test1_outputs.pmat' % expdir ],
+        )
+
+def main():
+    return tester
+

Modified: trunk/plearn_learners/generic/test/NNet/pytest.config
===================================================================
--- trunk/plearn_learners/generic/test/NNet/pytest.config	2008-02-28 19:14:17 UTC (rev 8598)
+++ trunk/plearn_learners/generic/test/NNet/pytest.config	2008-02-28 19:14:47 UTC (rev 8599)
@@ -5,31 +5,39 @@
     For each Test instance you declare in a config file, a test will be ran
     by PyTest.
     
-    @ivar name: The name of the Test must uniquely determine the
+      @ivar(name):
+    The name of the Test must uniquely determine the
     test. Among others, it will be used to identify the test's results
-    (.PyTest/I{name}/*_results/) and to report test informations.
-    @type name: String
+    (.PyTest/name/*_results/) and to report test informations.
+      @type(name):
+    String
     
-    @ivar description: The description must provide other users an
+      @ivar(description):
+    The description must provide other users an
     insight of what exactly is the Test testing. You are encouraged
     to used triple quoted strings for indented multi-lines
     descriptions.
-    @type description: String
+      @type(description):
+    String
     
-    @ivar category: The category to which this test belongs. By default, a
+      @ivar(category):
+    The category to which this test belongs. By default, a
     test is considered a 'General' test.
     
     It is not desirable to let an extensive and lengthy test as 'General',
     while one shall refrain abusive use of categories since it is likely
     that only 'General' tests will be ran before most commits...
     
-    @type category: string
+      @type(category):
+    string
     
-    @ivar program: The program to be run by the Test. The program's name
-    PRGNAME is used to lookup for the program in the following manner::
+      @ivar(program):
+    The program to be run by the Test. The program's name
+    PRGNAME is used to lookup for the program in the following manner:
     
     1) Look for a local program named PRGNAME
-    2) Look for a plearn-like command (plearn, plearn_tests, ...) named PRGNAME
+    2) Look for a plearn-like command (plearn, plearn_tests, ...) named 
+PRGNAME
     3) Call 'which PRGNAME'
     4) Fail
     
@@ -38,39 +46,50 @@
     &quot;compiler = 'pymake'&quot;). If no compiler is provided while the program is
     believed to be compilable, 'pymake' will be assigned by
     default. Arguments to be forwarded to the compiler can be provided as a
-    string through the 'compile_options' keyword argument.  @type program:
-    L{Program}
+    string through the 'compile_options' keyword argument. @type program:
+    Program
     
-    @ivar arguments: The command line arguments to be passed to the program
+      @ivar(arguments):
+    The command line arguments to be passed to the program
     for the test to proceed.
-    @type arguments: String
+      @type(arguments):
+    String
     
-    @ivar resources: A list of resources that are used by your program
+      @ivar(resources):
+    A list of resources that are used by your program
     either in the command line or directly in the code (plearn or pyplearn
-    files, databases, ...).  The elements of the list must be string
+    files, databases, ...). The elements of the list must be string
     representations of the path, absolute or relative, to the resource.
-    @type resources: List of Strings
+      @type(resources):
+    List of Strings
     
-    @ivar precision: The precision (absolute and relative) used when comparing
+      @ivar(precision):
+    The precision (absolute and relative) used when comparing
     floating numbers in the test output (default = 1e-6)
-    @type precision: float
+      @type(precision):
+    float
     
-    @ivar pfileprg: The program to be used for comparing files of psave &amp;
-    vmat formats. It can be either::
-    - &quot;__program__&quot;: maps to this test's program if its compilable;
+      @ivar(pfileprg):
+    The program to be used for comparing files of psave &amp;
+    vmat formats. It can be either:
+      - &quot;__program__&quot;: maps to this test's program if its compilable;
     maps to 'plearn_tests' otherwise (default);
-    - &quot;__plearn__&quot;: always maps to 'plearn_tests' (for when the program
+      - &quot;__plearn__&quot;: always maps to 'plearn_tests' (for when the program
     under test is not a version of PLearn);
-    - A Program (see 'program' option) instance
-    - None: if you are sure no files are to be compared.
+      - A Program (see 'program' option) instance
+      - None: if you are sure no files are to be compared.
     
-    @ivar ignored_files_re: Default behaviour of a test is to compare all
+      @ivar(ignored_files_re):
+    Default behaviour of a test is to compare all
     files created by running the test. In some case, one may prefer some of
     these files to be ignored.
-    @type ignored_files_re: list of regular expressions
+      @type(ignored_files_re):
+    list of regular expressions
     
-    @ivar disabled: If true, the test will not be ran.
-    @type disabled: bool
+      @ivar(disabled):
+    If true, the test will not be ran.
+      @type(disabled):
+    bool
     
 &quot;&quot;&quot;
 Test(
@@ -82,10 +101,28 @@
         compiler = &quot;pymake&quot;
         ),
     arguments = &quot;nnet.pyplearn&quot;,
-    resources = [ 'nnet.pyplearn' ],
+    resources = [ &quot;nnet.pyplearn&quot; ],
     precision = 1e-06,
     pfileprg = &quot;__program__&quot;,
     disabled = False,
     runtime = None,
     difftime = None
     )
+
+Test(
+    name = &quot;PL_NNet_Bags&quot;,
+    description = &quot;Neural network operating on bags&quot;,
+    category = &quot;General&quot;,
+    program = Program(
+        name = &quot;plearn_tests&quot;,
+        compiler = &quot;pymake&quot;
+        ),
+    arguments = &quot;nnet_bags.pyplearn&quot;,
+    resources = [ &quot;nnet_bags.pyplearn&quot; ],
+    precision = 1e-06,
+    pfileprg = &quot;__program__&quot;,
+    disabled = False,
+    runtime = None,
+    difftime = None
+    )
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002046.html">[Plearn-commits] r8598 - trunk/examples/data/test_suite
</A></li>
	<LI>Next message: <A HREF="002048.html">[Plearn-commits] r8600 - trunk/plearn/var
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2047">[ date ]</a>
              <a href="thread.html#2047">[ thread ]</a>
              <a href="subject.html#2047">[ subject ]</a>
              <a href="author.html#2047">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plearn-commits">More information about the Plearn-commits
mailing list</a><br>
</body></html>
