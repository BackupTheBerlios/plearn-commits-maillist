<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Plearn-commits] r6586 - in trunk/python_modules/plearn/math: .	stats stats/.pytest stats/.pytest/PL_cvx_numpy_matrix_conversions	stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/plearn-commits/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r6586%20-%20in%20trunk/python_modules/plearn/math%3A%20.%0A%09stats%20stats/.pytest%20stats/.pytest/PL_cvx_numpy_matrix_conversions%0A%09stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results&In-Reply-To=%3C200701172223.l0HMNQcB030684%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000034.html">
   <LINK REL="Next"  HREF="000036.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Plearn-commits] r6586 - in trunk/python_modules/plearn/math: .	stats stats/.pytest stats/.pytest/PL_cvx_numpy_matrix_conversions	stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results</H1>
    <B>dorionc at BerliOS</B> 
    <A HREF="mailto:plearn-commits%40lists.berlios.de?Subject=Re%3A%20%5BPlearn-commits%5D%20r6586%20-%20in%20trunk/python_modules/plearn/math%3A%20.%0A%09stats%20stats/.pytest%20stats/.pytest/PL_cvx_numpy_matrix_conversions%0A%09stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results&In-Reply-To=%3C200701172223.l0HMNQcB030684%40sheep.berlios.de%3E"
       TITLE="[Plearn-commits] r6586 - in trunk/python_modules/plearn/math: .	stats stats/.pytest stats/.pytest/PL_cvx_numpy_matrix_conversions	stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results">dorionc at mail.berlios.de
       </A><BR>
    <I>Wed Jan 17 23:23:26 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000034.html">[Plearn-commits] r6585 - trunk/plearn_learners/online
</A></li>
        <LI>Next message: <A HREF="000036.html">[Plearn-commits] r6587 - trunk/python_modules/plearn/math
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35">[ date ]</a>
              <a href="thread.html#35">[ thread ]</a>
              <a href="subject.html#35">[ subject ]</a>
              <a href="author.html#35">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dorionc
Date: 2007-01-17 23:23:25 +0100 (Wed, 17 Jan 2007)
New Revision: 6586

Added:
   trunk/python_modules/plearn/math/stats/
   trunk/python_modules/plearn/math/stats/.pytest/
   trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions/
   trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results/
   trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results/RUN.log
   trunk/python_modules/plearn/math/stats/__init__.py
   trunk/python_modules/plearn/math/stats/cvx_utils.py
   trunk/python_modules/plearn/math/stats/pytest.config
Log:
New (unstable) stats package. Will be announced when stable.



Property changes on: trunk/python_modules/plearn/math/stats/.pytest
___________________________________________________________________
Name: svn:ignore
   + *.compilation_log



Property changes on: trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions
___________________________________________________________________
Name: svn:ignore
   + .plearn
run_results


Added: trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results/RUN.log
===================================================================
--- trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results/RUN.log	2007-01-17 04:14:23 UTC (rev 6585)
+++ trunk/python_modules/plearn/math/stats/.pytest/PL_cvx_numpy_matrix_conversions/expected_results/RUN.log	2007-01-17 22:23:25 UTC (rev 6586)
@@ -0,0 +1,56 @@
+-------------------------------------------------------------------------------- 
+Test Case 1
+--------------------------------------------------------------------------------
+NumPy matrix shaped (10,)
+[ 1  2  3  4  5  6  7  8  9 10]
+CVX matrix shaped (1, 10)
+   1.0000e+00   2.0000e+00   3.0000e+00   4.0000e+00   5.0000e+00   6.0000e+00   7.0000e+00   8.0000e+00   9.0000e+00   1.0000e+01
+
+
+-------------------------------------------------------------------------------- 
+Test Case 2
+--------------------------------------------------------------------------------
+NumPy matrix shaped (1, 10)
+[[ 1  2  3  4  5  6  7  8  9 10]]
+CVX matrix shaped (1, 10)
+   1.0000e+00   2.0000e+00   3.0000e+00   4.0000e+00   5.0000e+00   6.0000e+00   7.0000e+00   8.0000e+00   9.0000e+00   1.0000e+01
+
+
+-------------------------------------------------------------------------------- 
+Test Case 3
+--------------------------------------------------------------------------------
+NumPy matrix shaped (10, 1)
+[[ 1]
+ [ 2]
+ [ 3]
+ [ 4]
+ [ 5]
+ [ 6]
+ [ 7]
+ [ 8]
+ [ 9]
+ [10]]
+CVX matrix shaped (10, 1)
+   1.0000e+00
+   2.0000e+00
+   3.0000e+00
+   4.0000e+00
+   5.0000e+00
+   6.0000e+00
+   7.0000e+00
+   8.0000e+00
+   9.0000e+00
+   1.0000e+01
+
+
+-------------------------------------------------------------------------------- 
+Test Case 4
+--------------------------------------------------------------------------------
+NumPy matrix shaped (2, 10)
+[[ 1  2  3  4  5  6  7  8  9 10]
+ [11 12 13 14 15 16 17 18 19 20]]
+CVX matrix shaped (2, 10)
+   1.0000e+00   2.0000e+00   3.0000e+00   4.0000e+00   5.0000e+00   6.0000e+00   7.0000e+00   8.0000e+00   9.0000e+00   1.0000e+01
+   1.1000e+01   1.2000e+01   1.3000e+01   1.4000e+01   1.5000e+01   1.6000e+01   1.7000e+01   1.8000e+01   1.9000e+01   2.0000e+01
+
+

Added: trunk/python_modules/plearn/math/stats/__init__.py
===================================================================
--- trunk/python_modules/plearn/math/stats/__init__.py	2007-01-17 04:14:23 UTC (rev 6585)
+++ trunk/python_modules/plearn/math/stats/__init__.py	2007-01-17 22:23:25 UTC (rev 6586)
@@ -0,0 +1,5 @@
+&quot;&quot;&quot;UNDER DEVELOPMENT!
+
+This package is meant to bundle statistical tools relying on RPy whenever
+possible and on CVXOPT whenever needed (MLE, GARCH...).
+&quot;&quot;&quot;

Added: trunk/python_modules/plearn/math/stats/cvx_utils.py
===================================================================
--- trunk/python_modules/plearn/math/stats/cvx_utils.py	2007-01-17 04:14:23 UTC (rev 6585)
+++ trunk/python_modules/plearn/math/stats/cvx_utils.py	2007-01-17 22:23:25 UTC (rev 6586)
@@ -0,0 +1,74 @@
+&quot;&quot;&quot;Provides functions to use CVX transparently where NumPy is the standard.&quot;&quot;&quot;
+import numpy
+from cvxopt.base import matrix, spmatrix, log
+
+def numpy_to_cvx(*args):
+    &quot;&quot;&quot;Returns CVX matrices from NumPy matrices
+
+    Note that NumPy one-dimensional arrays are transformed as row vectors
+    in CVX. See/Run test_matrix_conversions() for details.
+    &quot;&quot;&quot;
+    matrices = []
+    for a in args:
+        a    = numpy.asmatrix(a)
+        m, n = a.shape
+        a    = numpy.ravel(a.transpose())
+        matrices.append( matrix(a, (m,n), 'd') )
+
+    if len(matrices)==1:
+        return matrices[0]
+    return matrices
+
+def cvx_to_numpy(*args):
+    &quot;&quot;&quot;Returns NumPy matrices from CVX matrices
+
+    Note that CVX vectors are returns as one-dimensional NumPy
+    matrices. See/Run test_matrix_conversions() for details.
+    &quot;&quot;&quot;
+    matrices = []
+    for a in args:
+        matrices.append( numpy.array(a) )
+
+    if len(matrices)==1:
+        return matrices[0]
+    return matrices
+
+
+#####  Builtin Tests  #######################################################
+
+def test_matrix_conversions():
+    _1_10_ = numpy.array( range(1,11) ) 
+    test_cases = [
+        _1_10_,
+        numpy.array([ _1_10_ ]),
+        numpy.matrix(_1_10_).transpose(),        
+        numpy.array([ _1_10_, range(11, 21) ])
+        ]
+
+    for t, a in enumerate(test_cases):
+        print &quot;-&quot;*80, '\nTest Case %d\n'%(t+1), &quot;-&quot;*80        
+        print &quot;NumPy matrix shaped&quot;, a.shape
+        print a
+        
+        a_cvx = numpy_to_cvx(a)
+        print &quot;CVX matrix shaped&quot;, a_cvx.size
+        print a_cvx
+
+        a = numpy.asmatrix(a)
+        a_numpy = cvx_to_numpy(a_cvx)
+        m, n = a.shape
+        assert (m,n)==a_cvx.size, \
+               &quot;(m,n) = (%d,%d) != %s = a_cvx.size&quot;%(m, n, a_cvx.size)
+        assert (m,n)==a_numpy.shape, \
+               &quot;(m,n) = (%d,%d) != %s = a_numpy.size&quot;%(m, n, a_numpy.shape)
+
+        for i in range(m):
+            for j in range(n):
+                assert a[i,j] == a_cvx[i,j], &quot;a[%d,%d] = %f != %f = a_cvx[%d,%d]&quot;%(
+                    i, j, a[i,j], a_cvx[i,j], i, j )
+                assert a[i,j] == a_numpy[i,j], &quot;a[%d,%d] = %f != %f = a_numpy[%d,%d]&quot;%(
+                    i, j, a[i,j], a_numpy[i,j], i, j )
+        print
+
+if __name__ == &quot;__main__&quot;:
+    test_matrix_conversions()

Added: trunk/python_modules/plearn/math/stats/pytest.config
===================================================================
--- trunk/python_modules/plearn/math/stats/pytest.config	2007-01-17 04:14:23 UTC (rev 6585)
+++ trunk/python_modules/plearn/math/stats/pytest.config	2007-01-17 22:23:25 UTC (rev 6586)
@@ -0,0 +1,105 @@
+&quot;&quot;&quot;Pytest config file.
+
+Test is a class regrouping the elements that define a test for PyTest.
+    
+    For each Test instance you declare in a config file, a test will be ran
+    by PyTest.
+    
+      @ivar(name):
+    The name of the Test must uniquely determine the
+    test. Among others, it will be used to identify the test's results
+    (.PyTest/name/*_results/) and to report test informations.
+      @type(name):
+    String
+    
+      @ivar(description):
+    The description must provide other users an
+    insight of what exactly is the Test testing. You are encouraged
+    to used triple quoted strings for indented multi-lines
+    descriptions.
+      @type(description):
+    String
+    
+      @ivar(category):
+    The category to which this test belongs. By default, a
+    test is considered a 'General' test.
+    
+    It is not desirable to let an extensive and lengthy test as 'General',
+    while one shall refrain abusive use of categories since it is likely
+    that only 'General' tests will be ran before most commits...
+    
+      @type(category):
+    string
+    
+      @ivar(program):
+    The program to be run by the Test. The program's name
+    PRGNAME is used to lookup for the program in the following manner:
+    
+    1) Look for a local program named PRGNAME
+    2) Look for a plearn-like command (plearn, plearn_tests, ...) named 
+PRGNAME
+    3) Call 'which PRGNAME'
+    4) Fail
+    
+    Compilable program should provide the keyword argument 'compiler'
+    mapping to a string interpreted as the compiler name (e.g.
+    &quot;compiler = 'pymake'&quot;). If no compiler is provided while the program is
+    believed to be compilable, 'pymake' will be assigned by
+    default. Arguments to be forwarded to the compiler can be provided as a
+    string through the 'compile_options' keyword argument. @type program:
+    Program
+    
+      @ivar(arguments):
+    The command line arguments to be passed to the program
+    for the test to proceed.
+      @type(arguments):
+    String
+    
+      @ivar(resources):
+    A list of resources that are used by your program
+    either in the command line or directly in the code (plearn or pyplearn
+    files, databases, ...). The elements of the list must be string
+    representations of the path, absolute or relative, to the resource.
+      @type(resources):
+    List of Strings
+    
+      @ivar(precision):
+    The precision (absolute and relative) used when comparing
+    floating numbers in the test output (default = 1e-6)
+      @type(precision):
+    float
+    
+      @ivar(pfileprg):
+    The program to be used for comparing files of psave &amp;
+    vmat formats. It can be either:
+      - &quot;__program__&quot;: maps to this test's program if its compilable;
+    maps to 'plearn_tests' otherwise (default);
+      - &quot;__plearn__&quot;: always maps to 'plearn_tests' (for when the program
+    under test is not a version of PLearn);
+      - A Program (see 'program' option) instance
+      - None: if you are sure no files are to be compared.
+    
+      @ivar(ignored_files_re):
+    Default behaviour of a test is to compare all
+    files created by running the test. In some case, one may prefer some of
+    these files to be ignored.
+      @type(ignored_files_re):
+    list of regular expressions
+    
+      @ivar(disabled):
+    If true, the test will not be ran.
+      @type(disabled):
+    bool
+    
+&quot;&quot;&quot;
+Test(
+    name = &quot;PL_cvx_numpy_matrix_conversions&quot;,
+    description = &quot;&quot;,
+    category = &quot;General&quot;,
+    program = Program(name = &quot;python&quot;),
+    arguments = &quot;-c 'from plearn.math.stats.cvx_utils import *; test_matrix_conversions()'&quot;,
+    resources = [ ],
+    precision = 1e-06,
+    pfileprg = None,
+    disabled = False
+    )


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000034.html">[Plearn-commits] r6585 - trunk/plearn_learners/online
</A></li>
	<LI>Next message: <A HREF="000036.html">[Plearn-commits] r6587 - trunk/python_modules/plearn/math
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#35">[ date ]</a>
              <a href="thread.html#35">[ thread ]</a>
              <a href="subject.html#35">[ subject ]</a>
              <a href="author.html#35">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/plearn-commits">More information about the Plearn-commits
mailing list</a><br>
</body></html>
